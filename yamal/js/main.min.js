const header=document.querySelector(".header"),iconMenu=document.querySelector(".icon-menu"),fixedBlocks=document.querySelectorAll(".fixed-block"),modalShowBtn=document.querySelectorAll(".modal-show-btn"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector("#success-modal"),errorModal=document.querySelector("#error-modal"),overlay=document.querySelector(".overlay"),customSelect=document.querySelectorAll(".select-custom");let paddingValue=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0,animSpd=500;function windoOnResize(){paddingValue=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0}function enableScroll(){fixedBlocks&&fixedBlocks.forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){fixedBlocks&&fixedBlocks.forEach((e=>e.style.paddingRight=paddingValue)),document.body.style.paddingRight=paddingValue,document.body.classList.add("no-scroll")}function tabSwitch(e,t){e.forEach(((s,n)=>{s.addEventListener("click",(()=>{s.getAttribute("data-nav");e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),s.classList.add("active"),t[n].classList.add("active"),s.style.opacity="0",t[n].style.opacity="0",setTimeout((()=>{s.style.opacity="1",t[n].style.opacity="1"}),0)}))}))}function resetBtnVisible(e){const t=e.querySelector(".icon-close");t.style.opacity="0.5",t.style.pointerEvents="auto"}function resetBtnHidden(e){const t=e.querySelector(".icon-close");t.style.opacity="0",t.style.pointerEvents="none"}function maskInput(){const e=document.querySelectorAll("input[type=tel]");e&&e.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)}))}function openModal(e){header.classList.contains("open")||disableScroll(),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{header.classList.contains("open")||enableScroll()}),300)}function searchFormSuccess(e){e.querySelector("input").value="",resetBtnHidden(e)}function formSuccess(e){e.querySelectorAll(".form__item").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("input").forEach((e=>{"hidden"!=e.type&&(e.value="",e.checked=!1)})),e.querySelector(".select-custom")&&e.querySelectorAll(".select-custom").forEach((e=>{let t=e.getAttribute("data-select");e.querySelector(".select-custom__selected span").textContent=t,e.classList.remove("selected"),e.querySelectorAll(".select-custom__option").forEach((e=>e.classList.remove("selected")))})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__item")&&(e.querySelector(".file-form__items").innerHTML=""),e.querySelector(".form__extra")&&(e.querySelector(".form__extra").innerHTML="");let t=document.querySelector(".modal.open");t&&t.classList.remove("open"),openModal(successModal)}function smoothDrop(e,t){if(e.classList.contains("active"))t.style.height="0px";else{t.style.height="auto";let e=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=e}),0)}e.classList.toggle("active")}window.addEventListener("resize",windoOnResize),window.addEventListener("orientationchange",windoOnResize),maskInput(),iconMenu.addEventListener("click",(()=>{header.classList.contains("open")?(header.classList.remove("open"),iconMenu.setAttribute("aria-label","Открыть меню"),enableScroll()):(header.classList.add("open"),iconMenu.setAttribute("aria-label","Закрыть меню"),disableScroll())})),document.querySelectorAll(".menu__header").forEach((e=>{e.addEventListener("click",(t=>{e.classList.contains("has-subnavs")&&window.innerWidth<=992&&(t.preventDefault(),document.querySelectorAll(".menu__header").forEach((e=>{e.classList.contains("has-subnavs")&&!e.classList.contains("active")&&(e.classList.remove("active"),e.parentNode.querySelector(".menu__subnavs").style.height="0px")})),smoothDrop(e,e.parentNode.querySelector(".menu__subnavs")))}))}));const searchToggle=document.querySelector(".search-toggle"),searchClose=document.querySelector(".search__top .icon-close");searchToggle.addEventListener("click",(()=>{document.querySelector(".header__search").classList.add("show"),disableScroll(),overlay.classList.add("show"),header.classList.remove("open"),iconMenu.setAttribute("aria-label","Открыть меню")})),searchClose.addEventListener("click",(()=>{document.querySelector(".header__search").classList.remove("show"),overlay.classList.remove("show"),setTimeout((()=>{header.classList.contains("open")||enableScroll()}),animSpd)})),overlay.addEventListener("click",(()=>{searchClose.click()}));const searchForm=document.querySelectorAll(".search-form");searchForm.forEach((e=>{e.querySelector("input").addEventListener("input",(()=>{e.querySelector("input").value.length>0?resetBtnVisible(e):resetBtnHidden(e)})),e.querySelector(".icon-close").addEventListener("click",(()=>resetBtnHidden(e)))})),document.querySelectorAll(".file-form").forEach((e=>{e.querySelector("input").addEventListener("change",(t=>{let s=t.target.files;for(let t=0;t<s.length;t++){let n=s[t];e.querySelector(".file-form__items").innerHTML=`<div class="file-form__item">\n      <span class="file-form__name">${n.name} ${n.size}KB</span>\n      <span class="file-form__del"><svg><use xlink:href="img/icons/sprite.svg#del"></use></svg></span>\n      </div>\n  `}})),e.addEventListener("click",(t=>{const s=e.querySelector(".file-form__del");s&&s.contains(t.target)&&(e.querySelector("input").value="",setTimeout((()=>{e.querySelector(".file-form__items").innerHTML=""}),0))}))}));const vacMod=document.querySelector("#vac-modal");if(vacMod&&vacMod.querySelector(".cv-btn").addEventListener("change",(()=>{vacMod.querySelector(".cv-btn").checked?(vacMod.querySelector(".vac-extra").innerHTML='\n      <div class="vac-extra__inner">\n      <div class="vac-extra__col">\n          <h5>Личная информация</h5>\n          <div class="vac-extra__items">\n              <div class="vac-extra__item">\n                  <div class="item-form">\n                      <input type="text" placeholder="Фио">\n                  </div>\n                  <div class="form__grid">\n                      <div class="item-form">\n                          <input type="text" placeholder="Дата рождения 01.01.1995">\n                      </div>\n                      <div class="item-form">\n                          <input type="text" placeholder="Регион проживания">\n                      </div>\n                  </div>\n                  <div class="form__grid">\n                    <div class="item-form">\n                      <input type="text" placeholder="Гражданство">\n                    </div>\n                    <div class="item-form">\n                      <input type="tel" placeholder="Телефон">\n                    </div>\n                  </div>\n                  <div class="item-form">\n                      <input type="text" placeholder="Почта">\n                  </div>\n              </div>\n          </div>\n      </div>\n      <div class="vac-extra__col">\n          <h5>Образование</h5>\n          <div class="vac-extra__items">\n              <div class="vac-extra__item">\n                  <div class="item-form">\n                      <input type="text" placeholder="Учреждение">\n                  </div>                        \n                  <div class="item-form">\n                      <input type="text" placeholder="Факультет">\n                  </div>\n                  <div class="item-form">\n                      <input type="text" placeholder="Специальность">\n                  </div>\n                  <div class="form__grid">\n                    <div class="item-form">\n                      <input type="number" placeholder="Год начала обучения">\n                    </div>\n                    <div class="item-form">\n                        <input type="number" placeholder="Год окончания обучения">\n                    </div>\n                  </div>\n              </div>\n          </div>\n          <div class="vac-extra__btn"><span>+</span>Еще образование</div>\n      </div>\n      <div class="vac-extra__col">\n          <h5>Опыт работы</h5>\n          <div class="vac-extra__items">\n              <div class="vac-extra__item">\n                  <div class="item-form">\n                      <input type="text" placeholder="Место работы">\n                  </div>                        \n                  <div class="item-form">\n                      <input type="text" placeholder="Должность">\n                  </div>\n                  <div class="item-form">\n                      <input type="text" placeholder="Стаж">\n                  </div>\n              </div>\n          </div>\n          <div class="vac-extra__btn"><span>+</span>Еще место работы</div>\n      </div>\n      <div class="vac-extra__col">\n          <h5>Навыки</h5>\n          <div class="vac-extra__items">\n            <div class="vac-extra__item">\n                <div class="item-form">\n                    <textarea placeholder="Степень владения компьютером (начальный/уверенный/профессиональный)" oninput=\'this.style.height = "";this.style.height = this.scrollHeight + "px"\'></textarea>\n                </div>                        \n                <div class="item-form">\n                    <textarea placeholder="Перечислите основные программные продукты, которыми владеете" oninput=\'this.style.height = "";this.style.height = this.scrollHeight + "px"\'></textarea>\n                </div>\n                <div class="item-form item-form--license">\n                    <label class="item-checkbox">\n                        <input type="checkbox">\n                        <span>Есть водительское удостоверение</span>\n                    </label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="A"><span>А</span></label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="B"><span>B</span></label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="BE"><span>BE</span></label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="C"><span>C</span></label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="CE"><span>CE</span></label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="D"><span>D</span></label>\n                    <label class="item-radio"><input type="radio" name="driver-license" value="DE"><span>DE</span></label>\n                </div>\n            </div>\n          </div>\n      </div>\n      <div class="vac-extra__col">\n          <h5>Судимость</h5>\n          <div class="vac-extra__items">\n              <div class="vac-extra__item">\n                  <div class="item-form">\n                      <label class="item-checkbox">\n                          <input type="checkbox">\n                          <span>Есть</span>\n                      </label>\n                  </div>  \n                  <div class="item-form">\n                      <input type="text" placeholder="Статья">\n                  </div>\n              </div>\n          </div>\n      </div>\n  </div>\n    ',maskInput(),document.querySelectorAll(".vac-extra__col").forEach((e=>{e.querySelector(".vac-extra__btn")&&e.querySelector(".vac-extra__btn").addEventListener("click",(()=>{e.querySelector(".vac-extra__items").innerHTML+=e.querySelector(".vac-extra__item").innerHTML}))}))):vacMod.querySelector(".vac-extra").innerHTML=""})),document.querySelector(".item-card--video")){const e=document.querySelector(".item-card--video");window.addEventListener("scroll",(()=>{e.getBoundingClientRect().bottom-window.innerHeight<0&&(console.log(e.querySelector("video").autoplay),e.querySelector("video").play(),e.querySelector("video").autoplay=!0)}))}function openSelectCustom(e){e.classList.add("open"),e.style.zIndex=5,e.setAttribute("aria-expanded",!0),e.querySelectorAll(".select-custom__option").forEach((t=>{t.addEventListener("click",(s=>{e.querySelectorAll(".select-custom__option").forEach((e=>e.classList.remove("selected"))),t.classList.add("selected"),e.querySelector(".select-custom__selected span").textContent=t.textContent,e.classList.add("selected"),closeSelectCustom(e)}))})),document.addEventListener("click",(function t(s){e.contains(s.target)||(closeSelectCustom(e),document.removeEventListener("click",t))}))}function closeSelectCustom(e){e.classList.remove("open"),setTimeout((()=>{e.classList.contains("open")||(e.style.zIndex=4)}),animSpd),e.setAttribute("aria-expanded",!1)}customSelect&&customSelect.forEach((e=>{e.querySelector(".select-custom__selected").addEventListener("click",(()=>{e.classList.contains("open")?closeSelectCustom(e):openSelectCustom(e)}))}));const navSelect=document.querySelector(".page-nav--select");if(navSelect&&navSelect.querySelector(".page-nav__item.active")){const e=navSelect.querySelector(".page-nav__item.active");e.querySelector(".page-nav__link").addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("open")?closeSelectCustom(e):(e.style.zIndex=5,e.classList.add("open"),document.addEventListener("click",(function t(s){e.contains(s.target)||(closeSelectCustom(e),document.removeEventListener("click",t))})))}))}modalShowBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let s=e.getAttribute("data-modal");openModal(document.getElementById(s))}))})),modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)&&!e.querySelector(".modal__close").contains(t.target)||closeModal(e)}))}));const empNavs=document.querySelectorAll(".employees [data-nav]"),empBlocks=document.querySelectorAll(".employees [data-block]");if(document.querySelector(".employees")&&tabSwitch(empNavs,empBlocks),document.querySelector(".item-employees")&&document.querySelectorAll(".item-employees__det").forEach((e=>{e.querySelector(".item-employees__bar")&&(e.querySelector(".item-employees__bar span").style.width=e.querySelector(".item-employees__perc").textContent)})),document.querySelector(".share")){const e=encodeURIComponent(window.location.href),t=encodeURIComponent(document.title);let s=[{title:"VK",href:"https://vk.com/share.php?url="+e+"&title="+t,img:"<svg><use xlink:href='img/icons/sprite.svg#vk'></use></svg>"},{title:"Одноклассники",href:"https://connect.ok.ru/offer?url="+e+"&title="+t,img:"<svg><use xlink:href='img/icons/sprite.svg#ok'></use></svg>"},{title:"Телеграм",href:"https://t.me/share/url?url="+e+"&text="+t,img:"<svg><use xlink:href='img/icons/sprite.svg#telegram'></use></svg>"},{title:"Viber",href:"viber://forward?text="+e,img:"<svg><use xlink:href='img/icons/sprite.svg#viber'></use></svg>"},{title:"Twitter",href:"https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title+" "+window.location.href),img:"<svg><use xlink:href='img/icons/sprite.svg#twitter'></use></svg>"}];document.querySelector(".share__list").insertAdjacentHTML("beforeend",`\n    ${s.map((e=>`<li><a class="share__link" href="${e.href}" target="_blank" rel="noopener">\n     ${e.img}\n    </a></li>`)).join("")}`)}const pageGal=document.querySelector(".page-gallery");pageGal&&pageGal.querySelectorAll(".media-cover").length>8&&pageGal.classList.add("extra"),document.querySelector(".page-swipers")&&document.querySelectorAll(".page-swipers").forEach((e=>{const t=e.querySelector(".swiper-onwards-btn"),s=new Swiper(e.querySelector(".thumbswiper"),{slidesPerView:4.3,observer:!0,observeParents:!0,spaceBetween:12,breakpoints:{1300.98:{slidesPerView:3,spaceBetween:20,direction:"vertical"},992.98:{slidesPerView:3,spaceBetween:16,direction:"vertical"},767.98:{slidesPerView:4.14,spaceBetween:12,direction:"horizontal"}}}),n=new Swiper(e.querySelector(".mainswiper"),{slidesPerView:1,observer:!0,observeParents:!0,effect:"fade",thumbs:{swiper:s},speed:500});s.isEnd||t.classList.add("show"),n.on("slideChange",(()=>{n.realIndex+1===n.slides.length?t.classList.remove("show"):t.classList.add("show")})),t.addEventListener("click",(()=>{n.slideTo(n.realIndex+1)}))}));const mapItem=document.querySelectorAll(".item-map");if(document.querySelector(".main-map")){const e=new Swiper(".main-map .swiper",{slidesPerView:1,observer:!0,observeParents:!0,spaceBetween:10,pagination:{el:".main-map .swiper-pagination",type:"bullets",clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1},loop:!0,speed:1e3});e.on("slideChange",(function(){mapItem.forEach((e=>{e.classList.remove("active")})),mapItem[e.realIndex].classList.add("active")})),mapItem.forEach(((t,s)=>{t.addEventListener("click",(()=>{e.slideTo(s+1)}))}))}if(document.querySelector(".item-card--news")){new Swiper(".item-card--news .swiper",{slidesPerView:1,observer:!0,observeParents:!0,spaceBetween:10,pagination:{el:".item-card--news .swiper-pagination",type:"bullets",clickable:!0},speed:800})}if(document.querySelector(".item-card--team")){new Swiper(".item-card--team .swiper",{slidesPerView:1,observer:!0,observeParents:!0,spaceBetween:10,pagination:{el:".item-card--team .swiper-pagination",type:"bullets",clickable:!0},speed:800})}const projectSwipers=document.querySelector(".works-project__swipers");if(projectSwipers){const e=projectSwipers.querySelector(".swiper-onwards-btn"),t=new Swiper(projectSwipers.querySelector(".thumbswiper"),{slidesPerView:4.3,observer:!0,observeParents:!0,spaceBetween:12,breakpoints:{1300.98:{slidesPerView:3,spaceBetween:20},992.98:{slidesPerView:3,spaceBetween:16},767.98:{slidesPerView:4.14,spaceBetween:12}}}),s=new Swiper(projectSwipers.querySelector(".mainswiper"),{slidesPerView:1,observer:!0,observeParents:!0,effect:"fade",thumbs:{swiper:t},speed:500});t.isEnd||e.classList.add("show"),s.on("slideChange",(()=>{s.realIndex+1===s.slides.length?e.classList.remove("show"):e.classList.add("show")})),e.addEventListener("click",(()=>{s.slideTo(s.realIndex+1)}))}if(document.querySelector(".video-reviews")){new Swiper(".video-reviews .swiper",{slidesPerView:1,spaceBetween:10,observer:!0,observeParents:!0,speed:800,pagination:{el:".video-reviews .swiper-pagination",type:"bullets",clickable:!0},navigation:{prevEl:".video-reviews .swiper-btn--prev",nextEl:".video-reviews .swiper-btn--next"},breakpoints:{992.98:{slidesPerView:3,spaceBetween:20},767.98:{slidesPerView:2,spaceBetween:20},520.98:{slidesPerView:2,spaceBetween:10}}})}if(document.querySelector(".text-reviews")){new Swiper(".text-reviews .swiper",{slidesPerView:1,observer:!0,observeParents:!0,effect:"fade",pagination:{el:".text-reviews .swiper-pagination",type:"bullets",clickable:!0},navigation:{prevEl:".text-reviews .swiper-btn--prev",nextEl:".text-reviews .swiper-btn--next"},loop:!0,speed:500})}const fancyItems=document.querySelectorAll("[data-fancy]");fancyItems.forEach((e=>{e.addEventListener("click",(()=>{let t=[],s=e.getAttribute("data-fit")?e.getAttribute("data-fit"):"",n=e.getAttribute("data-fancy");fancyItems.forEach((e=>{e.closest(".swiper-slide-duplicate")||e.getAttribute("data-fancy")!==n||t.push(e.getAttribute("data-src"))}));let i=t.indexOf(e.getAttribute("data-src"));document.querySelector("footer").insertAdjacentHTML("afterend",`\n    <div class="modal fancy-modal">\n        <div class="modal__overlay">\n           <div class="modal__content">\n              <button class="modal__close" aria-label="Закрыть всплывающее окно"></button>\n              <button class="btn swiper-btn swiper-btn--prev">\n                  <svg><use xlink:href="img/icons/sprite.svg#chevron-left"></use></svg>\n              </button>\n              <button class="btn swiper-btn swiper-btn--next">\n                <svg><use xlink:href="img/icons/sprite.svg#chevron-right"></use></svg>\n              </button>\n              <div class="swiper mainswiper">\n                <div class="swiper-wrapper">\n                   ${t.map((e=>`<div class="swiper-slide">\n                         <div class="swiper-img ${s}">\n                             <img src=${e} alt="">\n                         </div>\n                     </div>`)).join("")}\n                </div>\n              </div>\n              <div class="swiper thumbswiper">\n                <div class="swiper-wrapper">\n                   ${t.map((e=>`<div class="swiper-slide">\n                         <div class="swiper-img ${s}">\n                             <img src=${e} alt="">\n                         </div>\n                     </div>`)).join("")}\n                   </div>\n              </div>\n           </div>\n        </div>\n    </div>\n  `);let r=new Swiper(".fancy-modal .thumbswiper",{slidesPerView:4.25,spaceBetween:8,observer:!0,observeParents:!0,initialSlide:i,breakpoints:{992.98:{slidesPerView:10,spaceBetween:0},767.98:{slidesPerView:7,spaceBetween:0,grid:{rows:2,fill:"column"}}}});new Swiper(".fancy-modal .mainswiper",{slidesPerView:1,slidesPerGroup:1,observer:!0,observeParents:!0,initialSlide:i,effect:"fade",thumbs:{swiper:r},navigation:{prevEl:".fancy-modal .swiper-btn--prev",nextEl:".fancy-modal .swiper-btn--next"}});const l=document.querySelector(".fancy-modal");openModal(l),l.addEventListener("click",(e=>{l.querySelector(".modal__content").contains(e.target)&&!l.querySelector(".modal__close").contains(e.target)||(closeModal(l),setTimeout((()=>{l.remove()}),animSpd))}))}))}));